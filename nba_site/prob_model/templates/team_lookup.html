{% extends "index.html" %}

{% block content %}
<div class="container mt-4">
    <h2>{{ team.team_name }}</h2>
    <div class="row">
        <div class="col-3">
            <img src="{{ team.team_logo }}" alt="{{ team.team_name }} Logo" class="img-fluid">
        </div>
        <div class="col-6">
            <canvas id="lineChart"></canvas>
            <script>
                // Sample rating history data (replace with your actual data)
                const rating_history = JSON.parse('{{ rating_history|safe }}');

                // Get the canvas element
                const ctx = document.getElementById('lineChart').getContext('2d');

                // Create the line chart
                const lineChart = new Chart(ctx, {
                    type: 'line',
                    data: {
                        labels: rating_history.map((_, index) => `Game ${index + 1}`),
                        datasets: [{
                            label: 'Elo Rating',
                            data: rating_history
                        }]
                    },
                    options: {
                        responsive: true,
                        scales: {
                            y: {
                                beginAtZero: false,
                            }
                        }
                    }
                });
            </script>
        </div>
    </div>
    <div class="row container mt-4">
        <h2>All Games:</h2>
        <div class="row">
            {% for game in games %}
            <div class="col-md-4 mb-4">
                <div class="card {% if game.isCompleted %}bg-light{% else %}{% endif %}">
                    <div class="card-body">
                        {% if game.isCompleted %}
                            <h5 class="card-title"><strong>
                                {{ game.result.winner.team_name }} {{ game.result.winner_score }}</strong> - 
                                {{ game.result.loser.team_name }} {{ game.result.loser_score }}
                            </h5>
                        {% else %}
                            <h5 class="card-title">{{ game.home_team.team_name }} vs. {{ game.away_team.team_name }}</h5>
                        {% endif %}
                        <p class="card-text"><strong>Home Team:</strong> <a href="/team_lookup?id={{game.home_team.team_id}}">
                            {{ game.home_team.team_name }}
                        </a></p>
                        <p class="card-text"><strong>Away Team:</strong> <a href="/team_lookup?id={{game.away_team.team_id}}">
                            {{ game.away_team.team_name }}
                        </a></p>
                        <p class="card-text"><strong>Date:</strong> {{ game.date }}</p>
                        <p class="card-text"><strong>Location:</strong> {{ game.location }}</p>
                        
                        
                        <a href="/game_lookup?id={{game.game_id}}">View Details</a>
                    </div>
                </div>
            </div>
            {% endfor %}
        </div>
    </div>
</div>
{% endblock %}
